<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>大河道乡天地图 - 天地图版</title>

	<!-- Leaflet CSS -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

	<style>
		body {
			margin: 0;
			padding: 0;
			font-family: "Microsoft YaHei", Arial, sans-serif;
		}
		#map {
			width: 100%;
			height: 100vh;
		}
		.info-panel {
			position: absolute;
			top: 10px;
			right: 10px;
			background: rgba(255, 255, 255, 0.95);
			padding: 15px;
			border-radius: 8px;
			box-shadow: 0 2px 10px rgba(0,0,0,0.3);
			z-index: 1000;
			max-width: 300px;
		}
		.info-panel h3 {
			margin: 0 0 10px 0;
			color: #333;
		}
		.info-panel p {
			margin: 5px 0;
			font-size: 14px;
			color: #666;
		}
		.info-panel ul {
			font-size: 12px;
			margin: 5px 0;
			padding-left: 20px;
			color: #666;
		}
		.legend {
			margin-top: 10px;
			padding-top: 10px;
			border-top: 1px solid #ddd;
		}
		.legend-item {
			display: flex;
			align-items: center;
			margin: 5px 0;
		}
		.legend-color {
			width: 20px;
			height: 20px;
			margin-right: 8px;
			border: 2px solid #333;
		}
		/* 自定义弹出窗口样式 */
		.leaflet-popup-content-wrapper {
			border-radius: 8px;
		}
		.plot-popup {
			font-size: 14px;
		}
		.plot-popup h4 {
			margin: 0 0 10px 0;
			color: #0066cc;
		}
		.plot-popup p {
			margin: 5px 0;
			line-height: 1.6;
		}
	</style>
</head>
<body>
	<div id="map"></div>

	<div class="info-panel">
		<h3>大河道乡地块地图</h3>
		<p><strong>地块数量:</strong> 66个</p>
		<p><strong>操作说明:</strong></p>
		<ul>
			<li>点击地块查看户主信息</li>
			<li>滚轮缩放查看细节</li>
			<li>天地图官方影像</li>
			<li>右上角可切换图层</li>
		</ul>
	</div>

	<!-- Leaflet JS -->
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

	<script>
		// 天地图密钥
		var tdtKey = '58200ecea8821940623e37a6f8b79f85';

		// 区域中心点
		var centerLat = 36.679295;
		var centerLng = 114.919696;

		// 创建地图，初始缩放级别设为17
		var map = L.map('map').setView([centerLat, centerLng], 17);

		// 天地图影像底图 (卫星影像)
		var tdtSatellite = L.tileLayer('http://t{s}.tianditu.gov.cn/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=' + tdtKey, {
			subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
			attribution: '© 天地图',
			maxZoom: 18
		}).addTo(map);

		// 天地图影像标注 (地名、道路标注)
		var tdtSatelliteAnno = L.tileLayer('http://t{s}.tianditu.gov.cn/DataServer?T=cia_w&x={x}&y={y}&l={z}&tk=' + tdtKey, {
			subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
			attribution: '© 天地图',
			maxZoom: 18
		});

		// 天地图矢量底图 (街道图)
		var tdtVector = L.tileLayer('http://t{s}.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=' + tdtKey, {
			subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
			attribution: '© 天地图',
			maxZoom: 18
		});

		// 天地图矢量标注
		var tdtVectorAnno = L.tileLayer('http://t{s}.tianditu.gov.cn/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=' + tdtKey, {
			subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
			attribution: '© 天地图',
			maxZoom: 18
		});

		// 天地图地形图
		var tdtTerrain = L.tileLayer('http://t{s}.tianditu.gov.cn/DataServer?T=ter_w&x={x}&y={y}&l={z}&tk=' + tdtKey, {
			subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
			attribution: '© 天地图',
			maxZoom: 18
		});

		// 天地图地形图标注
		var tdtTerrainAnno = L.tileLayer('http://t{s}.tianditu.gov.cn/DataServer?T=cta_w&x={x}&y={y}&l={z}&tk=' + tdtKey, {
			subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],
			attribution: '© 天地图',
			maxZoom: 18
		});

		// 组合图层 - 影像+标注
		var tdtSatelliteWithAnno = L.layerGroup([tdtSatellite, tdtSatelliteAnno]);

		// 组合图层 - 矢量+标注
		var tdtVectorWithAnno = L.layerGroup([tdtVector, tdtVectorAnno]);

		// 组合图层 - 地形+标注
		var tdtTerrainWithAnno = L.layerGroup([tdtTerrain, tdtTerrainAnno]);

		// 高清图片覆盖层的边界（如果有本地高清图片）
		var imageBounds = [
			[36.667524, 114.906735],  // 西南角 [纬度, 经度]
			[36.691066, 114.932656]   // 东北角 [纬度, 经度]
		];

		// 添加高清图片覆盖层（可选）
		var imageOverlay = L.imageOverlay('quzhou.jpg', imageBounds, {
			opacity: 0.85,
			interactive: true
		});

		// 添加中心点标记
		var marker = L.marker([centerLat, centerLng]).addTo(map);
		marker.bindPopup('<strong>大河道乡中心</strong><br>114.9197°E, 36.6793°N');

		// 地块数据
		var plotsData = [
			{"name": "46", "coords": [[36.68055555555555, 114.91642052777779], [36.680540388888886, 114.9166215], [36.680330805555556, 114.91659472222223], [36.68034705555555, 114.91639241666667], [36.68055555555555, 114.91642186111112]], "comment": "户主：鲁文谦\n面积：428.64"},
			{"name": "47", "coords": [[36.680339527777775, 114.91639108333334], [36.680323277777774, 114.91659472222223], [36.680118, 114.91655991666667], [36.68013641666666, 114.91635491666668], [36.68033738888889, 114.91638838888889]], "comment": "户主：苑怀振\n面积：438.71"},
			{"name": "49", "coords": [[36.680323277777774, 114.91659472222223], [36.68030808333333, 114.91680505555556], [36.680095277777774, 114.91676891666667], [36.680118, 114.91655991666667], [36.68032541666666, 114.91660008333334]], "comment": "户主：李辉\n面积：432.41"},
			{"name": "48", "coords": [[36.68012352777777, 114.91635225], [36.680111555555555, 114.91655855555557], [36.67991163888889, 114.91652644444444], [36.679924694444445, 114.91631741666667], [36.68012458333333, 114.9163508888889]], "comment": "户主：刘秋河\n面积：440.86"},
			{"name": "50", "coords": [[36.680111555555555, 114.91656661111112], [36.68008883333333, 114.91676758333334], [36.67988033333333, 114.91673411111111], [36.679903055555556, 114.91653180555556], [36.68010833333333, 114.91656391666668]], "comment": "户主：黄振强\n面积：430.95"},
			{"name": "69", "coords": [[36.67987630555555, 114.91631341666667], [36.67986436111111, 114.91651838888889], [36.67967627777777, 114.91648627777778], [36.67969575, 114.91628663888889], [36.679874166666664, 114.91631475000001]], "comment": "户主：鲁新江\n面积：371.40"},
			{"name": "70", "coords": [[36.67985897222222, 114.91652241666667], [36.67984597222222, 114.91670863888889], [36.679654638888884, 114.91668322222223], [36.67967627777777, 114.91648627777778], [36.67985791666666, 114.91652375000001]], "comment": "户主：苑玉贤\n面积：344.45"},
			{"name": "71", "coords": [[36.67984597222222, 114.91670863888889], [36.67983938888889, 114.91687477777778], [36.679645916666665, 114.91685872222223], [36.67966002777778, 114.91668991666667], [36.67984597222222, 114.91670863888889]], "comment": "面积：贾保运\n面积：335.20"},
			{"name": "81", "coords": [[36.679638805555555, 114.91627458333333], [36.679620388888885, 114.91647286111112], [36.67941297222222, 114.91643269444445], [36.679433527777775, 114.91623841666667], [36.679639861111106, 114.91627458333333]], "comment": "户主：贾运河\n面积：400.75"},
			{"name": "82", "coords": [[36.679620388888885, 114.91648091666667], [36.67961058333333, 114.9166671388889], [36.67941069444444, 114.916635], [36.67943016666666, 114.91644475000001], [36.67961825, 114.91647958333334]], "comment": "户主：苑新付\n面积：385.70"},
			{"name": "83", "coords": [[36.67960522222222, 114.9166725], [36.67959327777778, 114.91684533333334], [36.67941163888889, 114.91682391666667], [36.67942572222222, 114.91664169444445], [36.67960522222222, 114.9166725]], "comment": "户主：贾运海\n面积：308.16"},
			{"name": "84", "coords": [[36.67941094444444, 114.91623977777779], [36.67939683333333, 114.91643002777778], [36.67920016666667, 114.9163978888889], [36.67921641666666, 114.91620630555556], [36.67940986111111, 114.91623708333334]], "comment": "户主：苑长海\n面积：378.87"},
			{"name": "85", "coords": [[36.67940422222222, 114.9166443888889], [36.67940197222222, 114.91681722222222], [36.67925255555555, 114.91679847222223], [36.679277416666665, 114.91662297222223], [36.679406388888886, 114.91664305555557]], "comment": "户主：苑玉堂\n面积：274.54"},
			{"name": "86", "coords": [[36.67920888888889, 114.91620094444445], [36.679192638888885, 114.91639522222223], [36.67897444444444, 114.91636441666667], [36.678976638888884, 114.91632555555556], [36.6790035, 114.91632422222223], [36.67902402777778, 114.91615541666667], [36.679211027777775, 114.91619958333334]], "comment": "户主：苑民儒\n面积：466.69"},
			{"name": "88", "coords": [[36.679277416666665, 114.91662297222223], [36.67925255555555, 114.91679847222223], [36.679011805555554, 114.91675697222223], [36.67902266666666, 114.91659083333334], [36.679277416666665, 114.91662297222223]], "comment": "户主：苑玉海\n面积：443.06"},
			{"name": "87", "coords": [[36.67918402777777, 114.9164313888889], [36.679171, 114.91660555555556], [36.67898613888889, 114.91657744444446], [36.67899808333333, 114.91640727777778], [36.67918294444444, 114.91643405555556]], "comment": "户主：李素平\n面积：325.96"},
			{"name": "89", "coords": [[36.679017583333334, 114.91615808333334], [36.6790035, 114.91632422222223], [36.67880788888888, 114.91630816666667], [36.678823055555554, 114.91612997222222], [36.679017583333334, 114.91615405555557]], "comment": "户主：贾燕军\n面积：337.17"},
			{"name": "90", "coords": [[36.678976638888884, 114.91632555555556], [36.67895927777778, 114.91654797222223], [36.67880130555555, 114.91651850000001], [36.678818638888885, 114.91631352777779], [36.678976638888884, 114.91632555555556]], "comment": "户主：苑保平\n面积：377.41"},
			{"name": "92", "coords": [[36.67901944444444, 114.91659486111112], [36.679009666666666, 114.91676233333334], [36.678766749999994, 114.91673555555556], [36.67877438888889, 114.91656541666667], [36.67902266666666, 114.91659083333334]], "comment": "户主：苑玉国\n面积：425.47"},
			{"name": "91", "coords": [[36.67881433333333, 114.91633227777778], [36.67880130555555, 114.91651850000001], [36.67849388888889, 114.91648772222223], [36.67849833333333, 114.91629480555557], [36.67881325, 114.91633227777778]], "comment": "户主：苑志永\n面积：562.22"},
			{"name": "93", "coords": [[36.678770111111106, 114.91656272222222], [36.67875816666666, 114.91672752777778], [36.67848838888889, 114.91669675], [36.67849386111111, 114.91653061111111], [36.678770111111106, 114.91655872222223]], "comment": "户主：苑运平\n面积：0"},
			{"name": "16", "coords": [[36.68041858333333, 114.91549872222222], [36.680403416666664, 114.91569166666667], [36.680191666666666, 114.91566222222222], [36.68021008333333, 114.91546525000001], [36.680419638888885, 114.9154973888889]], "comment": "户主：苑瑞娇\n面积：392.57"},
			{"name": "18", "coords": [[36.68039911111111, 114.91569569444445], [36.68039038888889, 114.91589666666667], [36.680174361111106, 114.91585783333333], [36.680191666666666, 114.91566222222222], [36.680400166666665, 114.91569702777778]], "comment": "户主：杨国田\n面积：405.28"},
			{"name": "17", "coords": [[36.68020255555555, 114.91547061111112], [36.680191666666666, 114.91566222222222], [36.67997886111111, 114.91563811111112], [36.67999511111111, 114.91543983333334], [36.68020255555555, 114.91546794444444]], "comment": "户主：苑天增\n面积：411.65"},
			{"name": "19", "coords": [[36.680181999999995, 114.91566625], [36.68016897222222, 114.91585383333334], [36.67995938888889, 114.91582705555557], [36.67997886111111, 114.91563811111112], [36.68018308333333, 114.9156648888889]], "comment": "户主：苑露然\n面积：402.48"},
			{"name": "20", "coords": [[36.680161444444444, 114.91588730555556], [36.680153805555555, 114.91607086111112], [36.67995066666666, 114.9160521388889], [36.67996261111111, 114.91585519444445], [36.680161444444444, 114.91588330555557]], "comment": "户主：杨国田\n面积：399.57"},
			{"name": "21", "coords": [[36.680153777777775, 114.91608561111111], [36.68014291666666, 114.91627452777779], [36.679929027777774, 114.91624775000001], [36.67994636111111, 114.91605750000001], [36.680153777777775, 114.91608294444445]], "comment": "户主：刘希林\n面积：407.60"},
			{"name": "22", "coords": [[36.67995641666666, 114.91543044444445], [36.67994233333333, 114.91563411111112], [36.67974563888889, 114.91560600000001], [36.67976188888888, 114.91540636111111], [36.67995533333333, 114.91543044444445]], "comment": "户主：鲁文亮\n面积：359.64"},
			{"name": "23", "coords": [[36.679933722222216, 114.91563411111112], [36.67991963888888, 114.91581766666667], [36.67972833333333, 114.91579222222222], [36.67974563888889, 114.91560600000001], [36.67993158333333, 114.91563277777779]], "comment": "户主：苑志刚\n面积：353.99"},
			{"name": "24", "coords": [[36.679915333333334, 114.91582169444445], [36.67990447222222, 114.91601597222223], [36.679713138888886, 114.9159958888889], [36.67972833333333, 114.91579222222222], [36.67991963888888, 114.91581766666667]], "comment": "户主：鲁永军\n面积：384.46"},
			{"name": "25", "coords": [[36.67990122222222, 114.91602936111111], [36.67988175, 114.91623972222223], [36.67969902777777, 114.91621025], [36.679714222222216, 114.91600391666667], [36.679897999999994, 114.91603205555556]], "comment": "户主：苑永志\n面积：383.61"},
			{"name": "1", "coords": [[36.680457555555556, 114.91501502777778], [36.680442388888885, 114.91521466666667], [36.680259694444445, 114.91519058333334], [36.68027377777778, 114.91498558333333], [36.68045863888889, 114.91500966666668]], "comment": "户主：苑志波\n面积：365.78"},
			{"name": "2", "coords": [[36.680439166666666, 114.91522405555556], [36.68042613888888, 114.91542905555556], [36.68023591666667, 114.91540361111112], [36.680260749999995, 114.91519727777778], [36.680439166666666, 114.91522136111112]], "comment": "户主：苑长江\n面积：361.49"},
			{"name": "3", "coords": [[36.680253361111106, 114.9149828888889], [36.68023175, 114.9151878888889], [36.68001894444444, 114.91515441666667], [36.68003516666666, 114.9149601388889], [36.68025013888889, 114.9149828888889]], "comment": "户主：苑露涛\n面积：425.33"},
			{"name": "4", "coords": [[36.68023175, 114.9151878888889], [36.680214416666665, 114.91539291666668], [36.680005916666666, 114.9153661388889], [36.68001894444444, 114.91515441666667], [36.68023175, 114.9151878888889]], "comment": "户主：鲁文安\n面积：415.19"},
			{"name": "5", "coords": [[36.67998788888889, 114.91495611111111], [36.679973777777775, 114.91515041666668], [36.67979108333333, 114.91513166666667], [36.67980194444444, 114.91492666666667], [36.67998897222222, 114.91495211111112]], "comment": "户主：贾雨燕\n面积：369.39"},
			{"name": "6", "coords": [[36.67997272222222, 114.91515977777779], [36.67995325, 114.91535675], [36.67976836111111, 114.91534202777778], [36.67979108333333, 114.91513166666667], [36.67997272222222, 114.91515577777778]], "comment": "户主：苑龙岗\n面积：369.39"},
			{"name": "7", "coords": [[36.67976216666666, 114.91492130555557], [36.67975883333333, 114.91513033333334], [36.67951163888889, 114.91509016666667], [36.67951497222222, 114.91488247222223], [36.67976433333333, 114.9149226388889]], "comment": "户主：苑丽芬\n面积：500.84"},
			{"name": "8", "coords": [[36.679752388888886, 114.91513436111111], [36.67973936111111, 114.91533133333334], [36.67949644444444, 114.91530722222222], [36.67950947222222, 114.91509552777778], [36.67975883333333, 114.91513033333334]], "comment": "户主：贾鹏霄\n面积：500.25"},
			{"name": "26", "coords": [[36.67972533333333, 114.91540902777778], [36.67971769444444, 114.91560600000001], [36.67947586111111, 114.91557788888889], [36.67949319444444, 114.91537422222223], [36.67972533333333, 114.91540636111111]], "comment": "户主：贾俊章\n面积：463.18"},
			{"name": "27", "coords": [[36.67971769444444, 114.91560600000001], [36.67970144444444, 114.91579358333334], [36.67946930555555, 114.91576277777779], [36.67947586111111, 114.91557788888889], [36.67971769444444, 114.91560600000001]], "comment": "户主：鲁永卫\n面积：438.72"},
			{"name": "28", "coords": [[36.67969713888888, 114.91579894444445], [36.67968088888889, 114.91598786111112], [36.67946380555556, 114.91595438888889], [36.67946930555555, 114.91576277777779], [36.67969608333333, 114.91579625]], "comment": "户主：鲁光魁\n面积：436.61"},
			{"name": "29", "coords": [[36.67968088888889, 114.91598786111112], [36.6796625, 114.91620891666668], [36.67945719444444, 114.91617680555557], [36.67947455555555, 114.9159583888889], [36.67968088888889, 114.91598786111112]], "comment": "户主：鲁文谦\n面积：438.14"},
			{"name": "9", "coords": [[36.67950425, 114.91484897222223], [36.67951163888889, 114.91509016666667], [36.6792655, 114.91506608333334], [36.679266722222216, 114.91482355555556], [36.67950316666666, 114.91485433333334]], "comment": "户主：苑建薄\n面积：427.61"},
			{"name": "10", "coords": [[36.67949980555555, 114.91509552777778], [36.679488916666664, 114.91530052777779], [36.67924386111111, 114.91528180555557], [36.679260111111105, 114.91507677777778], [36.67950947222222, 114.91509552777778]], "comment": "户主：贾建锋\n面积：433.81"},
			{"name": "30", "coords": [[36.67946397222222, 114.91568775], [36.67944661111111, 114.91593697222223], [36.679261749999995, 114.9159168888889], [36.67927372222222, 114.91566633333333], [36.679461805555555, 114.91568775]], "comment": "户主：苑风山\n面积：466.83"},
			{"name": "31", "coords": [[36.67944661111111, 114.91593697222223], [36.679436777777774, 114.91616608333334], [36.67925622222222, 114.91613394444445], [36.679261749999995, 114.9159168888889], [36.67944661111111, 114.91593697222223]], "comment": "户主：贾志新\n面积：392.74"},
			{"name": "11", "coords": [[36.679264555555555, 114.91483427777779], [36.67925583333333, 114.91506472222223], [36.67901722222222, 114.91502725000001], [36.67902594444444, 114.91483294444446], [36.67926133333333, 114.91483561111112]], "comment": "户主：贾春秋\n面积：417.21"},
			{"name": "12", "coords": [[36.67925044444444, 114.91507947222223], [36.679240638888885, 114.91527777777779], [36.67902461111111, 114.91525636111112], [36.67904408333333, 114.91505269444446], [36.67924827777777, 114.91508080555556]], "comment": "户主：贾建雷\n面积：423.06"},
			{"name": "32", "coords": [[36.67926961111111, 114.91535280555556], [36.679254416666666, 114.91560069444445], [36.679063111111105, 114.91558863888889], [36.67907830555556, 114.91533272222223], [36.67926855555555, 114.9153501388889]], "comment": "户主：鲁平亮\n面积：495.08"},
			{"name": "35", "coords": [[36.679257638888885, 114.91561005555556], [36.67924786111111, 114.91578691666668], [36.67904794444444, 114.91577622222223], [36.67905986111111, 114.91559533333334], [36.6792555, 114.91560872222223]], "comment": "户主：苑希儒\n面积：351.93"},
			{"name": "39", "coords": [[36.67924463888889, 114.91579094444445], [36.67923808333333, 114.91594636111111], [36.679048888888886, 114.91593969444445], [36.67905113888889, 114.91578291666667], [36.67924463888889, 114.91579227777778]], "comment": "户主：苑玉忠\n面积：287.80"},
			{"name": "40", "coords": [[36.67924130555555, 114.91595441666668], [36.67923688888889, 114.91612055555557], [36.67905094444444, 114.91611655555556], [36.67905858333333, 114.91594369444445], [36.679237, 114.91595305555556]], "comment": "户主：杨红飞\n面积：298.00"},
			{"name": "13", "coords": [[36.67902486111111, 114.91484100000001], [36.67901722222222, 114.91502725000001], [36.67879580555555, 114.91501386111112], [36.67881097222222, 114.91481825000001], [36.67902269444444, 114.91483830555556]], "comment": "户主：贾春杰\n面积：424.39"},
			{"name": "14", "coords": [[36.679013999999995, 114.91504333333334], [36.67900311111111, 114.91524697222223], [36.67878922222222, 114.91522155555556], [36.67879580555555, 114.91502191666667], [36.67901613888888, 114.9150406388889]], "comment": "户主：苑志军\n面积：429.27"},
			{"name": "15", "coords": [[36.678766777777774, 114.91501522222222], [36.67875697222222, 114.91521619444445], [36.67853341666667, 114.91519747222223], [36.67855075, 114.91498844444445], [36.678763555555555, 114.91501386111112]], "comment": "户主：杨景玉\n面积：431.07"},
			{"name": "33", "coords": [[36.67904927777778, 114.91532872222223], [36.679036249999996, 114.91554041666667], [36.67879872222222, 114.91550158333334], [36.678808527777775, 114.91529791666667], [36.67905144444444, 114.91532872222223]], "comment": "户主：贾建康\n面积：568.35"},
			{"name": "34", "coords": [[36.678801, 114.91530194444445], [36.67879872222222, 114.91550158333334], [36.67852036111111, 114.91546408333333], [36.67854088888889, 114.91526044444446], [36.678801, 114.91530061111112]], "comment": "户主：贾志晓\n面积：541.12"},
			{"name": "36", "coords": [[36.67905775, 114.9155511388889], [36.67905225, 114.91573736111111], [36.67887705555555, 114.91570925], [36.67888255555555, 114.91552033333333], [36.67905775, 114.91554844444445]], "comment": "户主：贾建科\n面积：348.79"},
			{"name": "37", "coords": [[36.67888255555555, 114.91552033333333], [36.67886847222222, 114.91570791666668], [36.67869758333333, 114.91568247222223], [36.67871702777777, 114.91550294444446], [36.67887825, 114.91552166666668]], "comment": "户主：贾志山\n面积：299.08"},
			{"name": "38", "coords": [[36.6787095, 114.91550427777779], [36.67869544444444, 114.91567444444445], [36.6785095, 114.91565033333335], [36.67852463888889, 114.91546811111111], [36.67870627777778, 114.91550025000001]], "comment": "户主：贾晓亮\n面积：359.59"},
			{"name": "41", "coords": [[36.67904472222222, 114.91576416666668], [36.67904244444444, 114.91593163888889], [36.678855444444444, 114.91590352777779], [36.67885986111111, 114.91573472222223], [36.67904472222222, 114.91576283333333]], "comment": "户主：于秀花\n面积：325.72"},
			{"name": "43", "coords": [[36.67904244444444, 114.91593163888889], [36.679033749999995, 114.9160991388889], [36.67883919444444, 114.91608441666668], [36.678855444444444, 114.91590352777779], [36.67904244444444, 114.91593163888889]], "comment": "户主：鲁永军\n面积：323.82"},
			{"name": "42", "coords": [[36.67885555555555, 114.91574141666668], [36.67884791666666, 114.91590622222223], [36.67865122222222, 114.91588480555556], [36.67866316666667, 114.91570525], [36.67885986111111, 114.91573472222223]], "comment": "户主：贾建波\n面积：348.24"},
			{"name": "44", "coords": [[36.67884791666666, 114.91590622222223], [36.67883919444444, 114.91608441666668], [36.67868980555555, 114.91606969444445], [36.67869422222222, 114.91589819444445], [36.67884791666666, 114.91590622222223]], "comment": "户主：鲁文安\n面积：281.24"},
			{"name": "45", "coords": [[36.678685611111106, 114.91589283333334], [36.678682277777774, 114.91606300000001], [36.67851461111111, 114.91604694444445], [36.678519027777774, 114.91587141666668], [36.678686694444444, 114.9158955]], "comment": "户主：苑振江\n面积：286.91"}
		];

		// 创建地块图层组
		var plotsGroup = L.layerGroup().addTo(map);

		// 为每个地块创建多边形
		plotsData.forEach(function(plot) {
			var polygon = L.polygon(plot.coords, {
				color: '#FF6B6B',           // 边框颜色（珊瑚红）
				weight: 2,                  // 边框宽度
				opacity: 0.8,               // 边框透明度
				fillColor: '#4ECDC4',       // 填充颜色（青色）
				fillOpacity: 0.3            // 填充透明度
			});

			// 鼠标悬停效果
			polygon.on('mouseover', function(e) {
				this.setStyle({
					fillOpacity: 0.5,
					weight: 3
				});
			});

			polygon.on('mouseout', function(e) {
				this.setStyle({
					fillOpacity: 0.3,
					weight: 2
				});
			});

			// 点击显示弹出窗口
			var popupContent = '<div class="plot-popup">' +
				'<h4>地块 ' + plot.name + '</h4>' +
				'<p>' + plot.comment.replace(/\n/g, '<br>') + '</p>' +
				'</div>';

			polygon.bindPopup(popupContent);

			// 添加到图层组
			plotsGroup.addLayer(polygon);
		});

		// 添加区域边界矩形
		var bounds = L.rectangle(imageBounds, {
			color: '#ff7800',
			weight: 2,
			fillOpacity: 0.1
		});

		// 添加图层控制
		var baseLayers = {
			"天地图影像": tdtSatellite,
			"天地图影像(带标注)": tdtSatelliteWithAnno,
			"天地图矢量图": tdtVectorWithAnno,
			"天地图地形图": tdtTerrainWithAnno
		};

		var overlays = {
			"地块标注": plotsGroup,
			"高清图片覆盖": imageOverlay,
			"中心标记": marker,
			"区域边界": bounds
		};

		L.control.layers(baseLayers, overlays).addTo(map);

		// 添加比例尺
		L.control.scale({
			metric: true,
			imperial: false
		}).addTo(map);

		// 添加鼠标位置显示
		var coordsControl = L.control({position: 'bottomleft'});
		coordsControl.onAdd = function(map) {
			this._div = L.DomUtil.create('div', 'coords-control');
			this._div.style.background = 'rgba(255, 255, 255, 0.8)';
			this._div.style.padding = '5px 10px';
			this._div.style.borderRadius = '4px';
			this._div.style.fontSize = '12px';
			this.update();
			return this._div;
		};
		coordsControl.update = function(latlng) {
			this._div.innerHTML = latlng ?
				'经度: ' + latlng.lng.toFixed(6) + '°<br>纬度: ' + latlng.lat.toFixed(6) + '°' :
				'移动鼠标查看坐标';
		};
		coordsControl.addTo(map);

		map.on('mousemove', function(e) {
			coordsControl.update(e.latlng);
		});

		console.log("天地图加载完成，共 " + plotsData.length + " 个地块");
		console.log("中心点: [" + centerLat + ", " + centerLng + "]");
		console.log("使用天地图官方影像服务");
	</script>
</body>
</html>
